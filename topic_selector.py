# topic_selector.py
import random
import datetime
from collections import defaultdict

TOPIC_MAP = {
    0: [  # 월요일
{"board_type": "business", "keyword": "미국 창업자 인터뷰 모음"},
{"board_type": "business", "keyword": "글로벌 셀링을 위한 플랫폼 비교"},
{"board_type": "education", "keyword": "커뮤니티 칼리지와 4년제 대학 비교"},
{"board_type": "education", "keyword": "미국 교육제도 이해하기"},
{"board_type": "freetalk", "keyword": "요즘 빠진 취미 활동"},
{"board_type": "freetalk", "keyword": "미국 생활 중 느낀 사소한 차이들"},
{"board_type": "immigrantlife", "keyword": "영주권 인터뷰 후기"},
{"board_type": "immigrantlife", "keyword": "한인타운 장단점"},
{"board_type": "investment", "keyword": "장기 투자에 적합한 미국 ETF"},
{"board_type": "investment", "keyword": "글로벌 경제지표 해석 방법"},
{"board_type": "jobs", "keyword": "미국 내 경력 전환 스토리"},
{"board_type": "jobs", "keyword": "원격근무 가능한 미국 직업들"},
{"board_type": "legalhelp", "keyword": "H1B 비자 전환 시 주의사항"},
{"board_type": "legalhelp", "keyword": "이민 서류 준비 팁"},
{"board_type": "lifeinfo", "keyword": "미국 생활비 절약 노하우"},
{"board_type": "lifeinfo", "keyword": "처음 가입할 미국 은행 추천"},
{"board_type": "lifestyle", "keyword": "미국 홈데코 트렌드 소개"},
{"board_type": "lifestyle", "keyword": "자연과 함께하는 미국 캠핑 여행"},
{"board_type": "seoul", "keyword": "서울의 디저트 카페 추천"},
{"board_type": "seoul", "keyword": "서울 지하철 타고 떠나는 하루 여행"},
{"board_type": "stock_study", "keyword": "미국 주식 용어 기초 정리"},
{"board_type": "stock_study", "keyword": "초보 투자자를 위한 리스크 관리 팁"},
{"board_type": "korea_realestate", "keyword": "서울과 수도권 집값 비교"},
{"board_type": "korea_realestate", "keyword": "전세 vs 월세, 어떤 게 유리할까?"}           
    ],
    1: [  # 화요일
{"board_type": "business", "keyword": "미국 창업자 인터뷰 모음"},
{"board_type": "business", "keyword": "글로벌 셀링을 위한 플랫폼 비교"},
{"board_type": "education", "keyword": "커뮤니티 칼리지와 4년제 대학 비교"},
{"board_type": "education", "keyword": "미국 교육제도 이해하기"},
{"board_type": "freetalk", "keyword": "요즘 빠진 취미 활동"},
{"board_type": "freetalk", "keyword": "미국 생활 중 느낀 사소한 차이들"},
{"board_type": "immigrantlife", "keyword": "영주권 인터뷰 후기"},
{"board_type": "immigrantlife", "keyword": "한인타운 장단점"},
{"board_type": "investment", "keyword": "장기 투자에 적합한 미국 ETF"},
{"board_type": "investment", "keyword": "글로벌 경제지표 해석 방법"},
{"board_type": "jobs", "keyword": "미국 내 경력 전환 스토리"},
{"board_type": "jobs", "keyword": "원격근무 가능한 미국 직업들"},
{"board_type": "legalhelp", "keyword": "H1B 비자 전환 시 주의사항"},
{"board_type": "legalhelp", "keyword": "이민 서류 준비 팁"},
{"board_type": "lifeinfo", "keyword": "미국 생활비 절약 노하우"},
{"board_type": "lifeinfo", "keyword": "처음 가입할 미국 은행 추천"},
{"board_type": "lifestyle", "keyword": "미국 홈데코 트렌드 소개"},
{"board_type": "lifestyle", "keyword": "자연과 함께하는 미국 캠핑 여행"},
{"board_type": "seoul", "keyword": "서울의 디저트 카페 추천"},
{"board_type": "seoul", "keyword": "서울 지하철 타고 떠나는 하루 여행"},
{"board_type": "stock_study", "keyword": "미국 주식 용어 기초 정리"},
{"board_type": "stock_study", "keyword": "초보 투자자를 위한 리스크 관리 팁"},
{"board_type": "korea_realestate", "keyword": "서울과 수도권 집값 비교"},
{"board_type": "korea_realestate", "keyword": "전세 vs 월세, 어떤 게 유리할까?"}
    ],
    2: [  # 수요일
{"board_type": "business", "keyword": "미국 창업자 인터뷰 모음"},
{"board_type": "business", "keyword": "글로벌 셀링을 위한 플랫폼 비교"},
{"board_type": "education", "keyword": "커뮤니티 칼리지와 4년제 대학 비교"},
{"board_type": "education", "keyword": "미국 교육제도 이해하기"},
{"board_type": "freetalk", "keyword": "요즘 빠진 취미 활동"},
{"board_type": "freetalk", "keyword": "미국 생활 중 느낀 사소한 차이들"},
{"board_type": "immigrantlife", "keyword": "영주권 인터뷰 후기"},
{"board_type": "immigrantlife", "keyword": "한인타운 장단점"},
{"board_type": "investment", "keyword": "장기 투자에 적합한 미국 ETF"},
{"board_type": "investment", "keyword": "글로벌 경제지표 해석 방법"},
{"board_type": "jobs", "keyword": "미국 내 경력 전환 스토리"},
{"board_type": "jobs", "keyword": "원격근무 가능한 미국 직업들"},
{"board_type": "legalhelp", "keyword": "H1B 비자 전환 시 주의사항"},
{"board_type": "legalhelp", "keyword": "이민 서류 준비 팁"},
{"board_type": "lifeinfo", "keyword": "미국 생활비 절약 노하우"},
{"board_type": "lifeinfo", "keyword": "처음 가입할 미국 은행 추천"},
{"board_type": "lifestyle", "keyword": "미국 홈데코 트렌드 소개"},
{"board_type": "lifestyle", "keyword": "자연과 함께하는 미국 캠핑 여행"},
{"board_type": "seoul", "keyword": "서울의 디저트 카페 추천"},
{"board_type": "seoul", "keyword": "서울 지하철 타고 떠나는 하루 여행"},
{"board_type": "stock_study", "keyword": "미국 주식 용어 기초 정리"},
{"board_type": "stock_study", "keyword": "초보 투자자를 위한 리스크 관리 팁"},
{"board_type": "korea_realestate", "keyword": "서울과 수도권 집값 비교"},
{"board_type": "korea_realestate", "keyword": "전세 vs 월세, 어떤 게 유리할까?"}
    ],
    3: [  # 목요일
{"board_type": "business", "keyword": "미국 창업자 인터뷰 모음"},
{"board_type": "business", "keyword": "글로벌 셀링을 위한 플랫폼 비교"},
{"board_type": "education", "keyword": "커뮤니티 칼리지와 4년제 대학 비교"},
{"board_type": "education", "keyword": "미국 교육제도 이해하기"},
{"board_type": "freetalk", "keyword": "요즘 빠진 취미 활동"},
{"board_type": "freetalk", "keyword": "미국 생활 중 느낀 사소한 차이들"},
{"board_type": "immigrantlife", "keyword": "영주권 인터뷰 후기"},
{"board_type": "immigrantlife", "keyword": "한인타운 장단점"},
{"board_type": "investment", "keyword": "장기 투자에 적합한 미국 ETF"},
{"board_type": "investment", "keyword": "글로벌 경제지표 해석 방법"},
{"board_type": "jobs", "keyword": "미국 내 경력 전환 스토리"},
{"board_type": "jobs", "keyword": "원격근무 가능한 미국 직업들"},
{"board_type": "legalhelp", "keyword": "H1B 비자 전환 시 주의사항"},
{"board_type": "legalhelp", "keyword": "이민 서류 준비 팁"},
{"board_type": "lifeinfo", "keyword": "미국 생활비 절약 노하우"},
{"board_type": "lifeinfo", "keyword": "처음 가입할 미국 은행 추천"},
{"board_type": "lifestyle", "keyword": "미국 홈데코 트렌드 소개"},
{"board_type": "lifestyle", "keyword": "자연과 함께하는 미국 캠핑 여행"},
{"board_type": "seoul", "keyword": "서울의 디저트 카페 추천"},
{"board_type": "seoul", "keyword": "서울 지하철 타고 떠나는 하루 여행"},
{"board_type": "stock_study", "keyword": "미국 주식 용어 기초 정리"},
{"board_type": "stock_study", "keyword": "초보 투자자를 위한 리스크 관리 팁"},
{"board_type": "korea_realestate", "keyword": "서울과 수도권 집값 비교"},
{"board_type": "korea_realestate", "keyword": "전세 vs 월세, 어떤 게 유리할까?"}
    ],
    4: [  # 금요일
{"board_type": "business", "keyword": "미국 스타트업 창업자 인터뷰"},
{"board_type": "business", "keyword": "글로벌 셀링 플랫폼 추천 및 비교"},
{"board_type": "education", "keyword": "커뮤니티 칼리지 vs 4년제 대학 장단점"},
{"board_type": "education", "keyword": "미국 교육제도 쉽게 설명해주는 영상"},
{"board_type": "freetalk", "keyword": "요즘 빠져있는 취미 브이로그"},
{"board_type": "freetalk", "keyword": "미국 생활 문화 차이 브이로그"},
{"board_type": "immigrantlife", "keyword": "영주권 인터뷰 실제 후기"},
{"board_type": "immigrantlife", "keyword": "한인타운 거주 후기 및 장단점"},
{"board_type": "investment", "keyword": "미국 ETF 추천 및 분석"},
{"board_type": "investment", "keyword": "글로벌 경제지표 해석 강의"},
{"board_type": "jobs", "keyword": "미국 직장인 커리어 전환 스토리"},
{"board_type": "jobs", "keyword": "원격근무 가능한 미국 직업 TOP 10"},
{"board_type": "legalhelp", "keyword": "H1B 비자 전환 시 유의사항"},
{"board_type": "legalhelp", "keyword": "미국 이민 서류 준비 방법"},
{"board_type": "lifeinfo", "keyword": "미국 생활비 아끼는 꿀팁 모음"},
{"board_type": "lifeinfo", "keyword": "미국 은행 계좌 처음 만들기 가이드"},
{"board_type": "lifestyle", "keyword": "미국 홈데코 인테리어 트렌드"},
{"board_type": "lifestyle", "keyword": "미국 캠핑 명소 및 준비물 소개"},
{"board_type": "seoul", "keyword": "서울 디저트 카페 추천 영상"},
{"board_type": "seoul", "keyword": "서울 지하철 여행 브이로그"},
{"board_type": "stock_study", "keyword": "미국 주식 투자 용어 쉽게 설명"},
{"board_type": "stock_study", "keyword": "초보 투자자를 위한 리스크 관리법"},
{"board_type": "korea_realestate", "keyword": "서울 vs 수도권 집값 비교 분석"},
{"board_type": "korea_realestate", "keyword": "전세와 월세 비교 및 추천 영상"}
    ],
    5: [  # 토요일
{"board_type": "business", "keyword": "미국 스타트업 투자 트렌드"},
{"board_type": "business", "keyword": "실리콘밸리 대표 기업 성장 전략"},
{"board_type": "education", "keyword": "미국 명문대 입학 준비 가이드"},
{"board_type": "education", "keyword": "온라인 강의 활용법과 추천 사이트"},
{"board_type": "freetalk", "keyword": "최애 미국 드라마 추천"},
{"board_type": "freetalk", "keyword": "미국에서 겪은 황당했던 일화"},
{"board_type": "immigrantlife", "keyword": "미국 운전면허 취득 경험담"},
{"board_type": "immigrantlife", "keyword": "현지에서 만난 다양한 국적의 친구들"},
{"board_type": "investment", "keyword": "배당주 투자로 얻은 수익 사례"},
{"board_type": "investment", "keyword": "미국 부동산 투자 시 유의사항"},
{"board_type": "jobs", "keyword": "미국 취업 인터뷰 합격 꿀팁"},
{"board_type": "jobs", "keyword": "이직 후 연봉 협상 경험 공유"},
{"board_type": "legalhelp", "keyword": "미국 운전 중 경찰 대처 방법"},
{"board_type": "legalhelp", "keyword": "영주권 신청 시 필요한 추가 서류"},
{"board_type": "lifeinfo", "keyword": "미국에서 저렴하게 자동차 구입하기"},
{"board_type": "lifeinfo", "keyword": "미국 마트별 장보기 꿀팁"},
{"board_type": "lifestyle", "keyword": "미국 미니멀 라이프 실천기"},
{"board_type": "lifestyle", "keyword": "미국에서 직접 키운 허브 이야기"},
{"board_type": "seoul", "keyword": "서울의 야경 명소 베스트"},
{"board_type": "seoul", "keyword": "서울 도심 속 힐링 산책로"},
{"board_type": "stock_study", "keyword": "미국 주식 배당락일 이해하기"},
{"board_type": "stock_study", "keyword": "테크주 실적 발표 분석 포인트"},
{"board_type": "korea_realestate", "keyword": "신축 아파트 청약 전략"},
{"board_type": "korea_realestate", "keyword": "부동산 세금 절세 방법"}
    ],
    6: [  # 일요일
{"board_type": "business", "keyword": "미국 창업자 인터뷰 모음"},
{"board_type": "business", "keyword": "글로벌 셀링을 위한 플랫폼 비교"},
{"board_type": "education", "keyword": "커뮤니티 칼리지와 4년제 대학 비교"},
{"board_type": "education", "keyword": "미국 교육제도 이해하기"},
{"board_type": "freetalk", "keyword": "요즘 빠진 취미 활동"},
{"board_type": "freetalk", "keyword": "미국 생활 중 느낀 사소한 차이들"},
{"board_type": "immigrantlife", "keyword": "영주권 인터뷰 후기"},
{"board_type": "immigrantlife", "keyword": "한인타운 장단점"},
{"board_type": "investment", "keyword": "장기 투자에 적합한 미국 ETF"},
{"board_type": "investment", "keyword": "글로벌 경제지표 해석 방법"},
{"board_type": "jobs", "keyword": "미국 내 경력 전환 스토리"},
{"board_type": "jobs", "keyword": "원격근무 가능한 미국 직업들"},
{"board_type": "legalhelp", "keyword": "H1B 비자 전환 시 주의사항"},
{"board_type": "legalhelp", "keyword": "이민 서류 준비 팁"},
{"board_type": "lifeinfo", "keyword": "미국 생활비 절약 노하우"},
{"board_type": "lifeinfo", "keyword": "처음 가입할 미국 은행 추천"},
{"board_type": "lifestyle", "keyword": "미국 홈데코 트렌드 소개"},
{"board_type": "lifestyle", "keyword": "자연과 함께하는 미국 캠핑 여행"},
{"board_type": "seoul", "keyword": "서울의 디저트 카페 추천"},
{"board_type": "seoul", "keyword": "서울 지하철 타고 떠나는 하루 여행"},
{"board_type": "stock_study", "keyword": "미국 주식 용어 기초 정리"},
{"board_type": "stock_study", "keyword": "초보 투자자를 위한 리스크 관리 팁"},
{"board_type": "korea_realestate", "keyword": "서울과 수도권 집값 비교"},
{"board_type": "korea_realestate", "keyword": "전세 vs 월세, 어떤 게 유리할까?"}
    ],
}

def get_random_topic():
    today = datetime.datetime.today().weekday()
    today_topics = TOPIC_MAP.get(today, [])

    if not today_topics:
        return []

    # 게시판(board_type)별로 묶기
    grouped = defaultdict(list)
    for topic in today_topics:
        grouped[topic['board_type']].append(topic)

    # 각 게시판에서 하나씩 랜덤 선택
    selected = [random.choice(topics) for topics in grouped.values()]
    return selected
